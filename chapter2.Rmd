---
title       : Exploring Univariate Data
description : UNDER CONSTRUCTION

--- type:NormalExercise lang:r xp:100 skills:1

## USA state data

In this set of exercises we will be using data that is stored in an R object `US`, which is of the familiar class data frame. This data contains information about the states of the USA.  

The data is taken from the 'state' data set that comes with R.
  
  *** =instructions
- Check out the structure of the `US` object
- Write directly to the console and open the help page on `state`. Look at the variable descriptions under `state.x77`.
- Create a summary of the variables in `US`

*** =hint
- `str()`-function gives information about R-objects
- `?state` or help(state) opens the help page
- `summary()` creates summaries of the columns of a data.frame.
  
  *** =pre_exercise_code
```{r}
# create a data frame object US
US <- data.frame(State = row.names(state.x77))
US <- cbind(US, as.data.frame(state.x77, row.names=F))

# add a population density (a factor)
pop_area <- with(US, Population/Area)
breaks <- quantile(pop_area, probs=c(0,0.33,0.66,1))
US$PoptoArea <- factor(cut(pop_area, breaks=breaks, include.lowest = T),
                      labels=c("low","medium","high"))

colnames(US)[c(5,7)] <- c("Life_Exp","HS_Grad")
```

*** =sample_code
```{r}

# Check out the structure of US.



# Create a summary of the variables in US







# The console is below
```

*** =solution
```{r}

# Check out the structure of US.
str(US)


# Create a summary of the variables in US
summary(US)


```

*** =sct
```{r}

test_function("str", args = "object")
test_function("summary", args = "object" )

# test for error
test_error()

success_msg("Great work! Now let's do some plotting :)")

```

--- type:NormalExercise lang:r xp:150 skills:1

## Bar plots

Bar plots are useful for visualizing grouped data. A simple example is the level counts of a factor.  

In base R graphics, the function `barplot()` can be used to draw a bar plot. It's first argument is `height` which is the only mandatory argument. The information for `height` can be computed easily by creating a `summary()` or a `table()` of a factor.

In this exercise you will draw a barplot of `PoptoArea` in the data frame `US`. `PoptoArea` describes the population to area ratio in a state. You can use `str()` to see the structure of `PoptoArea`.

*** =instructions
- Remind yourself on how to access the column of a data frame and how to create objects.
- Use `table()` or `summary()` on `PoptoArea` in data frame `US`.
- Create an object `tmp` by assigning the output of `table()` or `summary()` to it.
- Use the function `barplot()` to draw a bar plot. Use the object you created as the first argument.

*** =hint
- You can access the columns of a data.frame (df) with the `$` operator: `df$column`.
- Remember how to create objects using the assign operator `<-`: `object_name <- function_call()`


*** =pre_exercise_code
```{r}
# create a data frame object US
US <- data.frame(State = row.names(state.x77))
US <- cbind(US, as.data.frame(state.x77, row.names=F))

# add a population density (a factor)
pop_area <- with(US, Population/Area)
breaks <- quantile(pop_area, probs=c(0,0.33,0.66,1))
US$PoptoArea <- factor(cut(pop_area, breaks=breaks, include.lowest = T),
                      labels=c("low","medium","high"))

colnames(US)[c(5,7)] <- c("Life_Exp","HS_Grad")
```


*** =sample_code
```{r}
# Use table() or summary() to look at the counts of different levels of PoptoArea.


# Create object tmp that stores the counts



# Call barplot() to draw a graph. Use the object you created as an argument.




```

*** =solution
```{r}
# Look at the counts of different levels of Pop_Area.
table(US$PoptoArea)


# Create object tmp that stores the counts.
tmp <- table(US$PoptoArea)


# Call barplot() to draw a graph. Use the object you created as an argument.
barplot(tmp)



```

*** =sct
```{r}

test_function("barplot", args="height")

# test error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Excellent work!")

```

--- type:NormalExercise lang:r xp:100 skills:1

## Adding labels to plots

Our bar plot looks good but it could use some extra information. Often you want to add a main title to the plot and perhaps add a label to the y or x axis.

You can easily add to a plot by calling further functions. For example you can use the `title()` function to add labels defined as character strings.

*** =instructions
- Write directly to the console and open the help page of `title()`.
- Figure out which parameter of `title()` corresponds to the main title.
- Call `title()` and give you graph the main title: "My barplot". Remember to use quotation marks.

*** =hint
- `?title` or `help(title)` opens a help page.
- The first argument, `main`, of `title()` can be used to set the main title.


*** =pre_exercise_code
```{r}
# create a data frame object US
US <- data.frame(State = row.names(state.x77))
US <- cbind(US, as.data.frame(state.x77, row.names=F))

# add a population density (a factor)
pop_area <- with(US, Population/Area)
breaks <- quantile(pop_area, probs=c(0,0.33,0.66,1))
US$PoptoArea <- factor(cut(pop_area, breaks=breaks, include.lowest = T),
                      labels=c("low","medium","high"))

colnames(US)[c(5,7)] <- c("Life_Exp","HS_Grad")
barplot(table(US$PoptoArea))
```


*** =sample_code
```{r}
# code to draw a barplot
barplot(table(US$PoptoArea))

# execute this code to add x-axis label
title(xlab="population/area")


# Add main title



```

*** =solution
```{r}
# draw a barplot
barplot(table(US$PoptoArea))


# Add a x-axis label
title(xlab="population/area")


# Add main title. "main" is the first argument of title() so it doesn't need to be named.
title("My barplot")


```

*** =sct
```{r}

# test error
test_error()


# Final message the student will see upon completing the exercise
success_msg("Great job!")

```

--- type:NormalExercise lang:r xp:100 skills:1

## Advanced summary statistics: variance

We have already seen the usefulness of the `summary()` function. However there are many more summary statistics that might interest us that are not reported in the default summary. Good examples are the variance and the standard deviation. 

The variance can be computed with the `var()`-function.

*** =instructions
- Create a summary of the `Life_Exp` column in data frame `US`.
- Compute the variance of `Life_Exp`. Save the result in an object called `le_var`
- Compute the standard deviation of `Life_Exp`. Save the result to an object called `le_sd` and then print it's value.
- Do you think you could compute the standard deviation with a single function call?

*** =hint
- You can access a column of a data.frame (df) by `df$column_name`.
- You can use the assign-operator `<-` to create an object.
- Standard deviation is the square root of the variance.
- You can type and execute the objects name to print it's value.


*** =pre_exercise_code
```{r}
# create a data frame object US
US <- data.frame(State = row.names(state.x77))
US <- cbind(US, as.data.frame(state.x77, row.names=F))

# add a population density (a factor)
pop_area <- with(US, Population/Area)
breaks <- quantile(pop_area, probs=c(0,0.33,0.66,1))
US$PoptoArea <- factor(cut(pop_area, breaks=breaks, include.lowest = T),
                      labels=c("low","medium","high"))

colnames(US)[c(5,7)] <- c("Life_Exp","HS_Grad")
```


*** =sample_code
```{r}
# hint: the function sqrt() computes the squre root.
sqrt(9) # 3

# Create a summary of Life_Exp in data frame US


# Create object le_var. Use var() to compute the variance.


# Create object le_sd and print it's value



```

*** =solution
```{r}
# Create a summary of Life_Exp in US
summary(US$Life_Exp)

# Create object le_var
le_var <- var(US$Life_Exp)

# Create object le_sd and print it's value
le_sd <- sqrt(le_var)
le_sd

```

*** =sct
```{r}

test_function("summary",args="object")
test_object("le_var")
test_object("le_sd")

# test error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Great work!")

```


--- type:NormalExercise lang:r xp:100 skills:1

## Histograms

Histograms are an excellent way of visualizing the shape of a distribution. In base R, histograms are drawn with the `hist()` function. The first argument of `hist()`, `x` should be a numeric vector of data values. The columns of a data frame can be such vectors, for example.

As with all the plotting functions in R, the `hist()` function can take on many additional arguments which allow for more control over the plot. One simple argument is `col`, which defines the color. `col` can be a character string giving the name of the color ("blue", "green", ...). Some possible color names can be found here: http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf

*** =instructions
- Create a histogram of the life expectancies in the USA states. The data is in the data frame `US`.
- Adjust your code and give your histogram a nice color using the `col` argument. 


*** =hint
- You can use `str(US)` to see the structure (and columns) of `US`
- You can access the column of a data frame (df) with the `$` symbol: `df$column_name`.


*** =pre_exercise_code
```{r}
# create a data frame object US
US <- data.frame(State = row.names(state.x77))
US <- cbind(US, as.data.frame(state.x77, row.names=F))

# add a population density (a factor)
pop_area <- with(US, Population/Area)
breaks <- quantile(pop_area, probs=c(0,0.33,0.66,1))
US$PoptoArea <- factor(cut(pop_area, breaks=breaks, include.lowest = T),
                      labels=c("low","medium","high"))

colnames(US)[c(5,7)] <- c("Life_Exp","HS_Grad")
```


*** =sample_code
```{r}
# Draw a histogram of Life_Exp in data frame US.






```

*** =solution
```{r}
# Draw a histogram of Life_Exp in data frame US.
hist(US$Life_Exp, col ="blue")





```

*** =sct
```{r}

test_function("hist", args="x")

# test error
test_error()


# Final message the student will see upon completing the exercise
success_msg("Good work!")

```

--- type:NormalExercise lang:r xp:150 skills:1

## Box plots

One very good way to summarize and compare distributions is by drawing box plots. A box plot visualizes the 25th, 50th and 75th percentiles (the box), the typical range (the whiskers) and the outliers (the dots) of a distribution. 

The whiskers extending from the box can be computed by several techniques. The default in R is to extend them to reach 1.5*IQR from the box, where IQR is the inter quartile range defined as  

`IQR = 75th percentile - 25th percentile`  

Values outside the whiskers can be considered as outliers, unusually distant observations. For more information on IQR, see wikipedia:  https://en.wikipedia.org/wiki/Interquartile_range

*** =instructions
- Draw a `boxplot()` of `US$Income`. The first argument (`x`) of `boxplot()` should be a numerical vector containing data values.
- Label the y axis, for example: "income per capita"
- Add a main title, for example: "Distribution of per capita income in USA states".

*** =hint
- Give the `Income` column of `US` as the first argument to `boxplot` to draw the plot.
- Use `title()` to add labels defined as characted strings. See ?title for help about argument names etc.

*** =pre_exercise_code
```{r}
# create a data frame object US
US <- data.frame(State = row.names(state.x77))
US <- cbind(US, as.data.frame(state.x77, row.names=F))

# add a population density (a factor)
pop_area <- with(US, Population/Area)
breaks <- quantile(pop_area, probs=c(0,0.33,0.66,1))
US$PoptoArea <- factor(cut(pop_area, breaks=breaks, include.lowest = T),
                      labels=c("low","medium","high"))

colnames(US)[c(5,7)] <- c("Life_Exp","HS_Grad")
```


*** =sample_code
```{r}
# Draw a boxplot of Income.



# Add y axis label.



# Add main title.




```

*** =solution
```{r}
# Draw a boxplot of Income
boxplot(US$Income)


# Add y axis label
title(ylab="income per capita")


# Add main title
title("Distribution of per capita income in USA states")


```

*** =sct
```{r}


test_function("boxplot", args="x")

# test error
test_error()


# Final message the student will see upon completing the exercise
success_msg("Awsome work!")

```
